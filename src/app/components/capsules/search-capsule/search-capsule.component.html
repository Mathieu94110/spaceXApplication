<div class="all-capsules">
  <div class="search-page">
    <mat-toolbar color="primary" class="toolbar">
      <span> <mat-icon>search</mat-icon> Rechercher une capsule</span>
    </mat-toolbar>

    <div class="search-container">
      <mat-form-field appearance="outline" class="search-input">
        <input matInput type="text" placeholder="Enter capsule name or ID" [(ngModel)]="searchTerm"
          (keyup.enter)="onSearch()">
        <ng-container>
        </ng-container>
        <button matSuffix mat-icon-button aria-label="Search">
          <mat-icon>search</mat-icon>
        </button>
      </mat-form-field>
      <button mat-raised-button color="accent" (click)="onSearch()">Search</button>
    </div>
    @if(capsulesList().length > 0){
    <div class="results-container">
      @for(capsule of capsulesList(); track capsule.id){
      <mat-card class="capsule-card">
        <mat-card-title>{{ capsule.serial}}</mat-card-title>
        <mat-card-subtitle>Status: {{ capsule.type }}</mat-card-subtitle>
        <mat-card-content>
          <p>{{ capsule.reuse_count }} reuse count</p>
          <p>{{ capsule.water_landings }} water landings</p>
          <p>{{ capsule.land_count }} land landings</p>
          <p>Status: {{ capsule.status }}</p>
          <p>Update: {{ capsule.last_update }}</p>
        </mat-card-content>
      </mat-card>
      }
    </div>
    }@else{
    @if(searchTerm()){
    <div class="no-results" *ngIf="searchTerm">
      <p>Aucun résultat trouvé pour "{{ searchTerm() }}"</p>
    </div>
    }@else {
    <div class="no-results" *ngIf="searchTerm">
      <p>Indiquez votre recherche</p>
    </div>
    }

    }
  </div>
</div>