<ng-container>
  <div *ngIf="capsulesIsLoading()">
    <div class="spinner-container">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  </div>

  <div *ngIf="!capsulesIsLoading() && capsules().length > 0">
    <div class="all-capsules">
      <mat-grid-list [cols]="gridCols" rowHeight="600" [gutterSize]="'24px'">
        <mat-grid-tile *ngFor="let capsule of capsules()" [colspan]="1" [rowspan]="1">
          <app-card-layout class="all-capsules-card">
            <span card-title>{{capsule.serial}} <span> {{capsule.type}}</span></span>
            <div card-img class="all-capsules-card-stats-container">
              <span class="all-capsules-card-stats">Reused {{capsule.reuse_count}} times</span>
              <span class="all-capsules-card-stats"> {{capsule.water_landings}} water landings</span>
              <span class="all-capsules-card-stats"> {{capsule.land_landings}} land landings</span>
              <div class="all-capsules-card-stats-rocket-launch">
                <span class="all-capsules-card-stats-rocket-launch-text">Launch:</span>
                <mat-icon (click)="handleRocketClick(capsule.launches[0])">rocket_launch</mat-icon>
              </div>
            </div>
            <span card-description>
              {{ capsule.last_update || 'Aucune description disponible' | slice: 0:100 }}...
            </span>
            <span card-upcoming [ngClass]="getCapsuleClass(capsule.status)">
              {{ capsule.status }}
            </span>
            <span card-action>
              <button card-upcoming mat-raised-button (click)="goToCapuleDetails(capsule.serial)">
                Voir le détail
              </button>
            </span>
          </app-card-layout>
        </mat-grid-tile>
      </mat-grid-list>
    </div>
  </div>

  <div *ngIf="capsulesError()">
    <div class="all-capsules-full-screen">
      <h2>Problème survenu lors de la récupération des capsules</h2>
    </div>
  </div>
</ng-container>